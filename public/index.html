<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contact App</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <style>
        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .tab-button.active {
            @apply bg-blue-600 text-white;
        }
    </style>

</head>

<body class="bg-gray-50 min-h-screen">
    <!-- Header -->
    <header class="bg-white shadow-sm border-b">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center space-x-3">
                    <div class="w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center">
                        <i data-lucide="users" class="w-5 h-5 text-white"></i>
                    </div>
                    <h1 class="text-xl font-semibold text-gray-900">Contact App</h1>
                </div>
            </div>
        </div>
    </header>

    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <div class="grid grid-cols-1 lg:grid-cols-4 gap-8">
            <!-- Sidebar com lista de contatos -->
            <div class="lg:col-span-1">
                <div class="bg-white rounded-lg shadow-sm border">
                    <div class="p-4 border-b">
                        <div class="flex items-center justify-between">
                            <h2 class="text-lg font-medium text-gray-900">Contatos</h2>
                            <button class="p-2 text-blue-600 hover:bg-blue-50 rounded-lg">
                                <i data-lucide="plus" class="w-4 h-4"></i>
                            </button>
                        </div>
                        <div class="mt-3">
                            <input type="text" placeholder="Buscar contatos..."
                                class="w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                        </div>
                    </div>
                    <div class="p-2 max-h-96 overflow-y-auto">
                        <!-- Lista de contatos -->
                        <div class="space-y-1" id="contacts">
                            <div class="contact-item flex items-center p-3 rounded-lg hover:bg-gray-50 cursor-pointer bg-blue-50 border-l-4 border-blue-600"
                                data-contact="joao" onclick="selectContact('joao')">
                                <div
                                    class="w-10 h-10 bg-blue-600 rounded-full flex items-center justify-center text-white font-medium">
                                    JD
                                </div>
                                <div class="ml-3 flex-1 min-w-0">
                                    <p class="text-sm font-medium text-gray-900 truncate">João Silva</p>
                                    <p class="text-xs text-gray-500 truncate">joao@email.com</p>
                                </div>
                            </div>
                            <div class="contact-item flex items-center p-3 rounded-lg hover:bg-gray-50 cursor-pointer"
                                data-contact="maria" onclick="selectContact('maria')">
                                <div
                                    class="w-10 h-10 bg-green-600 rounded-full flex items-center justify-center text-white font-medium">
                                    MS
                                </div>
                                <div class="ml-3 flex-1 min-w-0">
                                    <p class="text-sm font-medium text-gray-900 truncate">Maria Santos</p>
                                    <p class="text-xs text-gray-500 truncate">maria@email.com</p>
                                </div>
                            </div>
                            <div class="contact-item flex items-center p-3 rounded-lg hover:bg-gray-50 cursor-pointer"
                                data-contact="pedro" onclick="selectContact('pedro')">
                                <div
                                    class="w-10 h-10 bg-purple-600 rounded-full flex items-center justify-center text-white font-medium">
                                    PC
                                </div>
                                <div class="ml-3 flex-1 min-w-0">
                                    <p class="text-sm font-medium text-gray-900 truncate">Pedro Costa</p>
                                    <p class="text-xs text-gray-500 truncate">pedro@email.com</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Área principal -->
            <div class="lg:col-span-3">
                <div class="bg-white rounded-lg shadow-sm border">
                    <!-- Tabs -->
                    <div class="border-b">
                        <nav class="flex space-x-8 px-6" aria-label="Tabs">
                            <button onclick="showTab('contact')"
                                class="tab-button active py-4 px-1 border-b-2 border-transparent font-medium text-sm text-gray-500 hover:text-gray-700 hover:border-gray-300">
                                <div class="flex items-center space-x-2">
                                    <i data-lucide="user" class="w-4 h-4"></i>
                                    <span>Contato</span>
                                </div>
                            </button>
                            <button onclick="showTab('interactions')"
                                class="tab-button py-4 px-1 border-b-2 border-transparent font-medium text-sm text-gray-500 hover:text-gray-700 hover:border-gray-300">
                                <div class="flex items-center space-x-2">
                                    <i data-lucide="calendar" class="w-4 h-4"></i>
                                    <span>Interações</span>
                                </div>
                            </button>
                            <button onclick="showTab('email')"
                                class="tab-button py-4 px-1 border-b-2 border-transparent font-medium text-sm text-gray-500 hover:text-gray-700 hover:border-gray-300">
                                <div class="flex items-center space-x-2">
                                    <i data-lucide="mail" class="w-4 h-4"></i>
                                    <span>Enviar Email</span>
                                </div>
                            </button>
                        </nav>
                    </div>

                    <!-- Tab Content -->
                    <div class="p-6">
                        <!-- Aba Contato -->
                        <div id="contact" class="tab-content active">
                            <div class="space-y-6">
                                <!-- Foto de perfil -->
                                <div class="flex items-center space-x-6">
                                    <div class="relative">
                                        <div
                                            class="w-24 h-24 bg-blue-600 rounded-full flex items-center justify-center text-white text-2xl font-medium">
                                            JD
                                        </div>
                                        <button
                                            class="absolute -bottom-1 -right-1 w-8 h-8 bg-white border-2 border-gray-300 rounded-full flex items-center justify-center hover:bg-gray-50">
                                            <i data-lucide="camera" class="w-4 h-4 text-gray-600"></i>
                                        </button>
                                    </div>
                                    <div>
                                        <h3 class="text-lg font-medium text-gray-900">Foto de Perfil</h3>
                                        <p class="text-sm text-gray-500">Clique no ícone da câmera para alterar</p>
                                        <input type="file" accept="image/*" class="hidden" id="profile-photo">
                                        <label for="profile-photo"
                                            class="mt-2 inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 cursor-pointer">
                                            <i data-lucide="upload" class="w-4 h-4 mr-2"></i>
                                            Upload Foto
                                        </label>
                                    </div>
                                </div>

                                <!-- Informações básicas -->
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Nome
                                            Completo</label>
                                        <input type="text" value="João Silva"
                                            class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">E-mail</label>
                                        <input type="email" value="joao@email.com"
                                            class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Telefone</label>
                                        <input type="tel" value="(11) 99999-9999"
                                            class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Data de
                                            Nascimento</label>
                                        <input type="date" value="1990-05-15"
                                            class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                    </div>
                                </div>

                                <!-- Observações -->
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Observações</label>
                                    <textarea rows="4" placeholder="Adicione observações sobre este contato..."
                                        class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">Cliente importante da empresa XYZ. Prefere contato por e-mail.</textarea>
                                </div>

                                <!-- Anexos -->
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Documentos
                                        Anexos</label>
                                    <div
                                        class="border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-gray-400 transition-colors">
                                        <i data-lucide="file-plus" class="w-12 h-12 text-gray-400 mx-auto mb-4"></i>
                                        <p class="text-sm text-gray-600 mb-2">Arraste arquivos aqui ou clique para
                                            selecionar</p>
                                        <input type="file" multiple class="hidden" id="documents">
                                        <label for="documents"
                                            class="inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 cursor-pointer">
                                            Selecionar Arquivos
                                        </label>
                                    </div>
                                    <!-- Lista de arquivos anexados -->
                                    <div class="mt-4 space-y-2">
                                        <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                                            <div class="flex items-center space-x-3">
                                                <i data-lucide="file-text" class="w-5 h-5 text-gray-400"></i>
                                                <span class="text-sm text-gray-700">contrato_joao.pdf</span>
                                                <span class="text-xs text-gray-500">(2.3 MB)</span>
                                            </div>
                                            <button class="text-red-600 hover:text-red-800">
                                                <i data-lucide="x" class="w-4 h-4"></i>
                                            </button>
                                        </div>
                                    </div>
                                </div>

                                <!-- Botões de ação -->
                                <div class="flex justify-end space-x-3 pt-6 border-t">
                                    <button
                                        class="px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50">
                                        Cancelar
                                    </button>
                                    <button class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">
                                        Salvar Contato
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Aba Interações -->
                        <div id="interactions" class="tab-content">
                            <div class="space-y-6">
                                <!-- Header com botão para nova interação -->
                                <div class="flex justify-between items-center">
                                    <h3 class="text-lg font-medium text-gray-900">Histórico de Interações</h3>
                                    <button
                                        class="inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">
                                        <i data-lucide="plus" class="w-4 h-4 mr-2"></i>
                                        Nova Interação
                                    </button>
                                </div>

                                <!-- Formulário para nova interação -->
                                <div class="bg-gray-50 rounded-lg p-6">
                                    <h4 class="text-md font-medium text-gray-900 mb-4">Adicionar Nova Interação</h4>
                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-2">Data</label>
                                            <input type="datetime-local"
                                                class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-2">Tipo</label>
                                            <select
                                                class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                                <option>Ligação</option>
                                                <option>Reunião</option>
                                                <option>Observação</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="mb-4">
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Descrição</label>
                                        <textarea rows="3" placeholder="Descreva a interação..."
                                            class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"></textarea>
                                    </div>
                                    <button class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">
                                        Adicionar Interação
                                    </button>
                                </div>

                                <!-- Lista de interações -->
                                <div class="space-y-4">
                                    <div class="border border-gray-200 rounded-lg p-4">
                                        <div class="flex items-start justify-between">
                                            <div class="flex items-start space-x-3">
                                                <div
                                                    class="w-10 h-10 bg-green-100 rounded-full flex items-center justify-center">
                                                    <i data-lucide="phone" class="w-5 h-5 text-green-600"></i>
                                                </div>
                                                <div>
                                                    <div class="flex items-center space-x-2">
                                                        <span class="font-medium text-gray-900">Ligação</span>
                                                        <span class="text-sm text-gray-500">•</span>
                                                        <span class="text-sm text-gray-500">15/03/2024 às 14:30</span>
                                                    </div>
                                                    <p class="text-sm text-gray-600 mt-1">Discussão sobre proposta
                                                        comercial. Cliente interessado em expandir o contrato.</p>
                                                </div>
                                            </div>
                                            <button class="text-gray-400 hover:text-gray-600">
                                                <i data-lucide="more-horizontal" class="w-5 h-5"></i>
                                            </button>
                                        </div>
                                    </div>

                                    <div class="border border-gray-200 rounded-lg p-4">
                                        <div class="flex items-start justify-between">
                                            <div class="flex items-start space-x-3">
                                                <div
                                                    class="w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center">
                                                    <i data-lucide="users" class="w-5 h-5 text-blue-600"></i>
                                                </div>
                                                <div>
                                                    <div class="flex items-center space-x-2">
                                                        <span class="font-medium text-gray-900">Reunião</span>
                                                        <span class="text-sm text-gray-500">•</span>
                                                        <span class="text-sm text-gray-500">10/03/2024 às 10:00</span>
                                                    </div>
                                                    <p class="text-sm text-gray-600 mt-1">Reunião presencial no
                                                        escritório. Apresentação da nova linha de produtos.</p>
                                                </div>
                                            </div>
                                            <button class="text-gray-400 hover:text-gray-600">
                                                <i data-lucide="more-horizontal" class="w-5 h-5"></i>
                                            </button>
                                        </div>
                                    </div>

                                    <div class="border border-gray-200 rounded-lg p-4">
                                        <div class="flex items-start justify-between">
                                            <div class="flex items-start space-x-3">
                                                <div
                                                    class="w-10 h-10 bg-yellow-100 rounded-full flex items-center justify-center">
                                                    <i data-lucide="sticky-note" class="w-5 h-5 text-yellow-600"></i>
                                                </div>
                                                <div>
                                                    <div class="flex items-center space-x-2">
                                                        <span class="font-medium text-gray-900">Observação</span>
                                                        <span class="text-sm text-gray-500">•</span>
                                                        <span class="text-sm text-gray-500">05/03/2024 às 16:45</span>
                                                    </div>
                                                    <p class="text-sm text-gray-600 mt-1">Cliente mencionou interesse em
                                                        soluções de automação. Agendar follow-up.</p>
                                                </div>
                                            </div>
                                            <button class="text-gray-400 hover:text-gray-600">
                                                <i data-lucide="more-horizontal" class="w-5 h-5"></i>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Aba Email -->
                        <div id="email" class="tab-content">
                            <div class="space-y-6">
                                <div class="flex items-center justify-between">
                                    <h3 class="text-lg font-medium text-gray-900">Enviar Email</h3>
                                    <div class="flex items-center space-x-2 text-sm text-gray-500">
                                        <i data-lucide="mail" class="w-4 h-4"></i>
                                        <span>Para: joao@email.com</span>
                                    </div>
                                </div>

                                <div class="space-y-4">
                                    <!-- Assunto -->
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Assunto</label>
                                        <input type="text" placeholder="Digite o assunto do email..."
                                            class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                    </div>

                                    <!-- Corpo do email -->
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Mensagem</label>
                                        <div class="border border-gray-300 rounded-lg">
                                            <!-- Toolbar simples -->
                                            <div
                                                class="flex items-center space-x-2 p-3 border-b border-gray-200 bg-gray-50">
                                                <button class="p-2 text-gray-600 hover:bg-gray-200 rounded">
                                                    <i data-lucide="bold" class="w-4 h-4"></i>
                                                </button>
                                                <button class="p-2 text-gray-600 hover:bg-gray-200 rounded">
                                                    <i data-lucide="italic" class="w-4 h-4"></i>
                                                </button>
                                                <button class="p-2 text-gray-600 hover:bg-gray-200 rounded">
                                                    <i data-lucide="underline" class="w-4 h-4"></i>
                                                </button>
                                                <div class="w-px h-6 bg-gray-300"></div>
                                                <button class="p-2 text-gray-600 hover:bg-gray-200 rounded">
                                                    <i data-lucide="list" class="w-4 h-4"></i>
                                                </button>
                                                <button class="p-2 text-gray-600 hover:bg-gray-200 rounded">
                                                    <i data-lucide="link" class="w-4 h-4"></i>
                                                </button>
                                                <button class="p-2 text-gray-600 hover:bg-gray-200 rounded">
                                                    <i data-lucide="paperclip" class="w-4 h-4"></i>
                                                </button>
                                            </div>
                                            <textarea rows="12" placeholder="Digite sua mensagem aqui..."
                                                class="w-full px-3 py-3 border-0 focus:outline-none focus:ring-0 resize-none">Olá João,

Espero que esteja bem. Gostaria de dar continuidade à nossa conversa sobre a proposta comercial que discutimos na última reunião.

Conforme combinado, estou enviando em anexo os detalhes da proposta para sua análise. Fico à disposição para esclarecer qualquer dúvida.

Aguardo seu retorno.

Atenciosamente,</textarea>
                                        </div>
                                    </div>

                                    <!-- Botões de ação -->
                                    <div class="flex justify-between items-center pt-6 border-t">
                                        <div class="flex space-x-3">
                                            <button
                                                class="px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50">
                                                Pré-visualizar
                                            </button>
                                        </div>
                                        <button
                                            class="inline-flex items-center px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">
                                            <i data-lucide="send" class="w-4 h-4 mr-2"></i>
                                            Enviar Email
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Inicializar ícones Lucide
        lucide.createIcons();


        function getContacts() {
            axios
                .get(`http://localhost:8000/contacts`)
                .then((response) => {
                    const contacts = response.data;
                    console.log(repos);
                    var elemento = document.getElementById("#contacts");
                    var content;
                    for (i in repos) {
                        console.log(repos[i]);
                        
                        content += `
                        <div class="contact-item flex items-center p-3 rounded-lg hover:bg-gray-50 cursor-pointer bg-blue-50 border-l-4 border-blue-600"
                                data-contact="joao" onclick="selectContact('joao')">
                                <div
                                    class="w-10 h-10 bg-blue-600 rounded-full flex items-center justify-center text-white font-medium">
                                    JD
                                </div>
                                <div class="ml-3 flex-1 min-w-0">
                                    <p class="text-sm font-medium text-gray-900 truncate">${repos.name}</p>
                                    <p class="text-xs text-gray-500 truncate">${repos.email}</p>
                                </div>
                            </div>
                        `;
                        elemento.innerHTML(content);
                    }
                })
                .catch((error) => console.error(error));


            let currentContact = '0';

            getContacts();

            // Função para alternar entre abas
            function showTab(tabName) {
                const tabContents = document.querySelectorAll('.tab-content');
                tabContents.forEach(tab => {
                    tab.classList.remove('active');
                });

                const tabButtons = document.querySelectorAll('.tab-button');
                tabButtons.forEach(button => {
                    button.classList.remove('active');
                });

                document.getElementById(tabName).classList.add('active');
                event.target.closest('.tab-button').classList.add('active');
            }

            // Função para selecionar contato
            function selectContact(contactId) {
                currentContact = contactId;

                // Atualizar visual da lista
                document.querySelectorAll('.contact-item').forEach(item => {
                    item.classList.remove('bg-blue-50', 'border-l-4', 'border-blue-600');
                });

                document.querySelector(`[data-contact="${contactId}"]`).classList.add('bg-blue-50', 'border-l-4', 'border-blue-600');

                // Carregar dados do contato
                loadContactData(contactId);
            }

            // Função para carregar dados do contato
            function loadContactData(contactId) {
                const contact = contacts[contactId];
                if (!contact) return;

                // Atualizar formulário de contato
                document.querySelector('input[type="text"]').value = contact.name;
                document.querySelector('input[type="email"]').value = contact.email;
                document.querySelector('input[type="tel"]').value = contact.phone;
                document.querySelector('input[type="date"]').value = contact.birthdate;
                document.querySelector('textarea').value = contact.notes;

                // Atualizar avatar
                const avatarDiv = document.querySelector('.w-24.h-24');
                avatarDiv.className = `w-24 h-24 ${contact.color} rounded-full flex items-center justify-center text-white text-2xl font-medium`;
                avatarDiv.textContent = contact.avatar;

                // Atualizar email "Para:"
                document.querySelector('.text-sm.text-gray-500 span').textContent = `Para: ${contact.email}`;

                // Carregar interações
                loadInteractions(contact.interactions);
            }

            // Função para carregar interações
            function loadInteractions(interactions) {
                const interactionsContainer = document.querySelector('#interactions .space-y-4');
                interactionsContainer.innerHTML = '';

                interactions.forEach(interaction => {
                    const interactionDiv = document.createElement('div');
                    interactionDiv.className = 'border border-gray-200 rounded-lg p-4';
                    interactionDiv.innerHTML = `
            <div class="flex items-start justify-between">
                <div class="flex items-start space-x-3">
                    <div class="w-10 h-10 ${interaction.color} rounded-full flex items-center justify-center">
                        <i data-lucide="${interaction.icon}" class="w-5 h-5"></i>
                    </div>
                    <div>
                        <div class="flex items-center space-x-2">
                            <span class="font-medium text-gray-900">${interaction.title}</span>
                            <span class="text-sm text-gray-500">•</span>
                            <span class="text-sm text-gray-500">${interaction.date}</span>
                        </div>
                        <p class="text-sm text-gray-600 mt-1">${interaction.description}</p>
                    </div>
                </div>
                <button class="text-gray-400 hover:text-gray-600">
                    <i data-lucide="more-horizontal" class="w-5 h-5"></i>
                </button>
            </div>
        `;
                    interactionsContainer.appendChild(interactionDiv);
                });

                // Reinicializar ícones
                lucide.createIcons();
            }

            // Validações de formulário
            function validateForm() {
                const name = document.querySelector('input[type="text"]').value.trim();
                const email = document.querySelector('input[type="email"]').value.trim();
                const phone = document.querySelector('input[type="tel"]').value.trim();
                const birthdate = document.querySelector('input[type="date"]').value;

                let isValid = true;
                let errors = [];

                // Validar nome
                if (!name) {
                    showFieldError('input[type="text"]', 'Nome é obrigatório');
                    errors.push('Nome é obrigatório');
                    isValid = false;
                } else if (name.length < 2) {
                    showFieldError('input[type="text"]', 'Nome deve ter pelo menos 2 caracteres');
                    errors.push('Nome deve ter pelo menos 2 caracteres');
                    isValid = false;
                } else {
                    clearFieldError('input[type="text"]');
                }

                // Validar email
                const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                if (!email) {
                    showFieldError('input[type="email"]', 'E-mail é obrigatório');
                    errors.push('E-mail é obrigatório');
                    isValid = false;
                } else if (!emailRegex.test(email)) {
                    showFieldError('input[type="email"]', 'E-mail inválido');
                    errors.push('E-mail inválido');
                    isValid = false;
                } else {
                    clearFieldError('input[type="email"]');
                }

                // Validar telefone
                const phoneRegex = /^$$\d{2}$$\s\d{4,5}-\d{4}$/;
                if (!phone) {
                    showFieldError('input[type="tel"]', 'Telefone é obrigatório');
                    errors.push('Telefone é obrigatório');
                    isValid = false;
                } else if (!phoneRegex.test(phone)) {
                    showFieldError('input[type="tel"]', 'Formato: (11) 99999-9999');
                    errors.push('Telefone em formato inválido');
                    isValid = false;
                } else {
                    clearFieldError('input[type="tel"]');
                }

                // Validar data de nascimento
                if (birthdate) {
                    const today = new Date();
                    const birth = new Date(birthdate);
                    const age = today.getFullYear() - birth.getFullYear();

                    if (birth > today) {
                        showFieldError('input[type="date"]', 'Data não pode ser futura');
                        errors.push('Data de nascimento não pode ser futura');
                        isValid = false;
                    } else if (age > 120) {
                        showFieldError('input[type="date"]', 'Data inválida');
                        errors.push('Data de nascimento inválida');
                        isValid = false;
                    } else {
                        clearFieldError('input[type="date"]');
                    }
                }

                return { isValid, errors };
            }

            // Validar formulário de interação
            function validateInteractionForm() {
                const date = document.querySelector('#interactions input[type="datetime-local"]').value;
                const type = document.querySelector('#interactions select').value;
                const description = document.querySelector('#interactions textarea').value.trim();

                let isValid = true;
                let errors = [];

                if (!date) {
                    showFieldError('#interactions input[type="datetime-local"]', 'Data é obrigatória');
                    errors.push('Data é obrigatória');
                    isValid = false;
                } else {
                    clearFieldError('#interactions input[type="datetime-local"]');
                }

                if (!type) {
                    showFieldError('#interactions select', 'Tipo é obrigatório');
                    errors.push('Tipo é obrigatório');
                    isValid = false;
                } else {
                    clearFieldError('#interactions select');
                }

                if (!description) {
                    showFieldError('#interactions textarea', 'Descrição é obrigatória');
                    errors.push('Descrição é obrigatória');
                    isValid = false;
                } else if (description.length < 10) {
                    showFieldError('#interactions textarea', 'Descrição deve ter pelo menos 10 caracteres');
                    errors.push('Descrição muito curta');
                    isValid = false;
                } else {
                    clearFieldError('#interactions textarea');
                }

                return { isValid, errors };
            }

            // Validar formulário de email
            function validateEmailForm() {
                const subject = document.querySelector('#email input[type="text"]').value.trim();
                const message = document.querySelector('#email textarea').value.trim();

                let isValid = true;
                let errors = [];

                if (!subject) {
                    showFieldError('#email input[type="text"]', 'Assunto é obrigatório');
                    errors.push('Assunto é obrigatório');
                    isValid = false;
                } else if (subject.length < 3) {
                    showFieldError('#email input[type="text"]', 'Assunto deve ter pelo menos 3 caracteres');
                    errors.push('Assunto muito curto');
                    isValid = false;
                } else {
                    clearFieldError('#email input[type="text"]');
                }

                if (!message) {
                    showFieldError('#email textarea', 'Mensagem é obrigatória');
                    errors.push('Mensagem é obrigatória');
                    isValid = false;
                } else if (message.length < 20) {
                    showFieldError('#email textarea', 'Mensagem deve ter pelo menos 20 caracteres');
                    errors.push('Mensagem muito curta');
                    isValid = false;
                } else {
                    clearFieldError('#email textarea');
                }

                return { isValid, errors };
            }

            // Mostrar erro no campo
            function showFieldError(selector, message) {
                const field = document.querySelector(selector);
                const parent = field.parentElement;

                // Remover erro anterior
                const existingError = parent.querySelector('.error-message');
                if (existingError) {
                    existingError.remove();
                }

                // Adicionar classe de erro
                field.classList.add('border-red-500', 'focus:ring-red-500', 'focus:border-red-500');
                field.classList.remove('border-gray-300', 'focus:ring-blue-500', 'focus:border-transparent');

                // Adicionar mensagem de erro
                const errorDiv = document.createElement('div');
                errorDiv.className = 'error-message text-red-600 text-sm mt-1';
                errorDiv.textContent = message;
                parent.appendChild(errorDiv);
            }

            // Limpar erro do campo
            function clearFieldError(selector) {
                const field = document.querySelector(selector);
                const parent = field.parentElement;

                // Remover mensagem de erro
                const existingError = parent.querySelector('.error-message');
                if (existingError) {
                    existingError.remove();
                }

                // Remover classes de erro
                field.classList.remove('border-red-500', 'focus:ring-red-500', 'focus:border-red-500');
                field.classList.add('border-gray-300', 'focus:ring-blue-500', 'focus:border-transparent');
            }

            // Mostrar notificação
            function showNotification(message, type = 'success') {
                const notification = document.createElement('div');
                notification.className = `fixed top-4 right-4 p-4 rounded-lg shadow-lg z-50 ${type === 'success' ? 'bg-green-500 text-white' : 'bg-red-500 text-white'
                    }`;
                notification.innerHTML = `
        <div class="flex items-center space-x-2">
            <i data-lucide="${type === 'success' ? 'check-circle' : 'alert-circle'}" class="w-5 h-5"></i>
            <span>${message}</span>
        </div>
    `;

                document.body.appendChild(notification);
                lucide.createIcons();

                setTimeout(() => {
                    notification.remove();
                }, 3000);
            }

            // Formatação automática do telefone
            function formatPhone(input) {
                let value = input.value.replace(/\D/g, '');

                if (value.length >= 11) {
                    value = value.replace(/(\d{2})(\d{5})(\d{4})/, '($1) $2-$3');
                } else if (value.length >= 10) {
                    value = value.replace(/(\d{2})(\d{4})(\d{4})/, '($1) $2-$3');
                } else if (value.length >= 6) {
                    value = value.replace(/(\d{2})(\d{4})/, '($1) $2');
                } else if (value.length >= 2) {
                    value = value.replace(/(\d{2})/, '($1) ');
                }

                input.value = value;
            }

            // Event Listeners
            document.addEventListener('DOMContentLoaded', function () {
                // Carregar dados do contato inicial
                loadContactData(currentContact);

                // Formatação automática do telefone
                const phoneInput = document.querySelector('input[type="tel"]');
                phoneInput.addEventListener('input', function () {
                    formatPhone(this);
                });

                // Validação em tempo real
                const contactInputs = document.querySelectorAll('#contact input, #contact textarea');
                contactInputs.forEach(input => {
                    input.addEventListener('blur', validateForm);
                });

                // Botão salvar contato
                document.querySelector('#contact .bg-blue-600').addEventListener('click', function (e) {
                    e.preventDefault();
                    const validation = validateForm();

                    if (validation.isValid) {
                        showNotification('Contato salvo com sucesso!');
                    } else {
                        showNotification('Por favor, corrija os erros no formulário', 'error');
                    }
                });

                // Botão adicionar interação
                document.querySelector('#interactions .bg-blue-600').addEventListener('click', function (e) {
                    e.preventDefault();
                    const validation = validateInteractionForm();

                    if (validation.isValid) {
                        showNotification('Interação adicionada com sucesso!');
                        // Limpar formulário
                        document.querySelector('#interactions input[type="datetime-local"]').value = '';
                        document.querySelector('#interactions select').selectedIndex = 0;
                        document.querySelector('#interactions textarea').value = '';
                    } else {
                        showNotification('Por favor, corrija os erros no formulário', 'error');
                    }
                });

                // Botão enviar email
                document.querySelector('#email .bg-blue-600').addEventListener('click', function (e) {
                    e.preventDefault();
                    const validation = validateEmailForm();



                    if (validation.isValid) {
                        console.log(e);
                        showNotification('Email enviado com sucesso!');
                    } else {
                        showNotification('Por favor, corrija os erros no formulário', 'error');
                    }
                });
            });

            // Adicionar funcionalidade de drag and drop para upload de arquivos
            const dropZones = document.querySelectorAll('[class*="border-dashed"]');

            dropZones.forEach(zone => {
                zone.addEventListener('dragover', (e) => {
                    e.preventDefault();
                    zone.classList.add('border-blue-400', 'bg-blue-50');
                });

                zone.addEventListener('dragleave', (e) => {
                    e.preventDefault();
                    zone.classList.remove('border-blue-400', 'bg-blue-50');
                });

                zone.addEventListener('drop', (e) => {
                    e.preventDefault();
                    zone.classList.remove('border-blue-400', 'bg-blue-50');
                    showNotification('Arquivos anexados com sucesso!');
                });
            });
    </script>
</body>

</html>